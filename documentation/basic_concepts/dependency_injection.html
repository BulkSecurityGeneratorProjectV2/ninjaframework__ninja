<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2019-02-07 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190207" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Ninja - Dependency injection</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.3.1.min.js"></script>

                          
        
<meta name="description" content="Ninja is a full stack web framework for Java.                     Rock solid, fast and super productive."/>
                      
        
<link rel="icon" href="favicon.png" type="image/png"/>
                      
        
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Titillium+Web" type="text/css"/>
                      
        
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Inconsolata" type="text/css"/>
                      
        
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" type="text/css"/>
                      
        
<script type="text/javascript">var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-38154034-1']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();</script>
          
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/ninjaframework/ninja">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../../.." id="bannerLeft" title="Ninja web framework">
                                                                                                <img src="../../ninja_logo.png"  alt="Ninja web framework"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
            
                
                    
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2019-02-07</li>
              <li id="projectVersion" class="pull-right">
                    Version: 6.4.2
        </li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Introduction</li>
                              
      <li>
  
                          <a href="../../introduction.html" title="The problem we solve">
          <i class="none"></i>
        The problem we solve</a>
            </li>
                
      <li>
  
                          <a href="../../high_level_overview.html" title="Ninja - high level overview">
          <i class="none"></i>
        Ninja - high level overview</a>
            </li>
                
      <li>
  
                          <a href="../../team.html" title="The team">
          <i class="none"></i>
        The team</a>
            </li>
                              <li class="nav-header">Commercial support</li>
                              
      <li>
  
                          <a href="../../commercial_support/philosophy.html" title="Philosophy">
          <i class="none"></i>
        Philosophy</a>
            </li>
                
      <li>
  
                          <a href="../../commercial_support/training.html" title="Training">
          <i class="none"></i>
        Training</a>
            </li>
                
      <li>
  
                          <a href="../../commercial_support/support_plans.html" title="Support plans">
          <i class="none"></i>
        Support plans</a>
            </li>
                
      <li>
  
                          <a href="../../commercial_support/agile_custom_development.html" title="Custom development">
          <i class="none"></i>
        Custom development</a>
            </li>
                              <li class="nav-header">Documentation</li>
                                                                                                                    
      <li>
  
                          <a href="../../documentation/getting_started/installing_ninja.html" title="Getting Started">
          <i class="icon-chevron-right"></i>
        Getting Started</a>
                  </li>
                                                                                                                                                                                                                                              
      <li>
  
                          <a href="../../documentation/basic_concepts/basic_concepts.html" title="Basic concepts">
          <i class="icon-chevron-down"></i>
        Basic concepts</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/super_dev_mode.html" title="SuperDevMode">
          <i class="none"></i>
        SuperDevMode</a>
            </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/routing.html" title="Routing">
          <i class="none"></i>
        Routing</a>
            </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/controllers.html" title="Controllers">
          <i class="none"></i>
        Controllers</a>
            </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/filters.html" title="Filters">
          <i class="none"></i>
        Filters</a>
            </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/argument_extractors.html" title="Argument extractors">
          <i class="none"></i>
        Argument extractors</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><i class="none"></i>Dependency injection</a>
          </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/sessions.html" title="Sessions">
          <i class="none"></i>
        Sessions</a>
            </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/flash_scope.html" title="Flash scope">
          <i class="none"></i>
        Flash scope</a>
            </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/error_handling.html" title="Error handling">
          <i class="none"></i>
        Error handling</a>
            </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/metrics.html" title="Metrics">
          <i class="none"></i>
        Metrics</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="../../documentation/configuration_and_modes.html" title="Configuration and modes">
          <i class="none"></i>
        Configuration and modes</a>
            </li>
                                                                                                                        
      <li>
  
                          <a href="../../documentation/html_templating/getting_started.html" title="HTML templating">
          <i class="icon-chevron-right"></i>
        HTML templating</a>
                  </li>
                
      <li>
  
                          <a href="../../documentation/working_with_json_jsonp.html" title="Working with JSON / JSONP">
          <i class="none"></i>
        Working with JSON / JSONP</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/working_with_xml.html" title="Working with XML">
          <i class="none"></i>
        Working with XML</a>
            </li>
                              <li class="nav-header">Advanced topics</li>
                              
      <li>
  
                          <a href="../../documentation/websockets.html" title="Web Sockets">
          <i class="none"></i>
        Web Sockets</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/validation.html" title="Validation">
          <i class="none"></i>
        Validation</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/content_negotiation.html" title="Content negotiation">
          <i class="none"></i>
        Content negotiation</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/uploading_files.html" title="Uploading files">
          <i class="none"></i>
        Uploading files</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/scheduler.html" title="Scheduler">
          <i class="none"></i>
        Scheduler</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/lifecycle.html" title="Lifecycle">
          <i class="none"></i>
        Lifecycle</a>
            </li>
                                                                  
      <li>
  
                          <a href="../../documentation/working_with_relational_dbs/jpa.html" title="Working with relational DBs">
          <i class="icon-chevron-right"></i>
        Working with relational DBs</a>
                  </li>
                
      <li>
  
                          <a href="../../documentation/using_the_cache.html" title="Using the cache">
          <i class="none"></i>
        Using the cache</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/internationalization.html" title="Internationalization">
          <i class="none"></i>
        Internationalization</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/static_assets.html" title="Static assets">
          <i class="none"></i>
        Static assets</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/sending_mail.html" title="Sending mail">
          <i class="none"></i>
        Sending mail</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/custom_routing.html" title="Custom routing">
          <i class="none"></i>
        Custom routing</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/servlet_bridge.html" title="Servlet bridge">
          <i class="none"></i>
        Servlet bridge</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/console.html" title="Console application">
          <i class="none"></i>
        Console application</a>
            </li>
                                                                                                                                                            
      <li>
  
                          <a href="../../documentation/testing_your_application/getting_started.html" title="Testing">
          <i class="icon-chevron-right"></i>
        Testing</a>
                  </li>
                
      <li>
  
                          <a href="../../documentation/debugging.html" title="Debugging">
          <i class="none"></i>
        Debugging</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/security/getting_started.html" title="Security">
          <i class="none"></i>
        Security</a>
            </li>
                                                                                                                        
      <li>
  
                          <a href="../../documentation/deployment/getting_started.html" title="Deployment">
          <i class="icon-chevron-right"></i>
        Deployment</a>
                  </li>
                
      <li>
  
                          <a href="../../documentation/upgrade_guide.html" title="Upgrade guide">
          <i class="none"></i>
        Upgrade guide</a>
            </li>
                
      <li>
  
                          <a href="../../apidocs/index.html" title="API docs (JavaDoc)">
          <i class="none"></i>
        API docs (JavaDoc)</a>
            </li>
                              <li class="nav-header">Ninja Modules</li>
                              
      <li>
  
                          <a href="../../documentation/modules.html" title="Overview">
          <i class="none"></i>
        Overview</a>
            </li>
                              <li class="nav-header">Great community</li>
                              
      <li>
  
                          <a href="https://twitter.com/ninjaframework" class="externalLink" title="@ninjaframework">
          <i class="none"></i>
        @ninjaframework</a>
            </li>
                
      <li>
  
                          <a href="https://groups.google.com/d/forum/ninja-framework" class="externalLink" title="Mailing list">
          <i class="none"></i>
        Mailing list</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/ninjaframework/ninja" class="externalLink" title="Source code">
          <i class="none"></i>
        Source code</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/ninjaframework/ninja/issues" class="externalLink" title="Bug tracker">
          <i class="none"></i>
        Bug tracker</a>
            </li>
                
      <li>
  
                          <a href="../../security.html" title="Security issues">
          <i class="none"></i>
        Security issues</a>
            </li>
                              <li class="nav-header">For developers</li>
                              
      <li>
  
                          <a href="../../developer/changelog.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                
      <li>
  
                          <a href="../../developer/roadmap.html" title="Roadmap">
          <i class="none"></i>
        Roadmap</a>
            </li>
                
      <li>
  
                          <a href="../../developer/getting_started.html" title="How to contribute">
          <i class="none"></i>
        How to contribute</a>
            </li>
            </ul>
                
                    
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="http://www.ninjaframework.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://www.ninjaframework.org/ninja-core" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
               
        
        
        <div id="twitter">
    
    <a href="https://twitter.com/ninjaframework" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow ninjaframework</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </div>
                   <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Dependency injection</h1>
<div class="section">
<h2>Introduction<a name="Introduction"></a></h2>
<p>In regular code you usually would use a lot of <tt>new MyObject(&#x2026;)</tt> statements. But that is usually bad because you don&#x2019;t have any outside control of the instances. And this makes the code hard to test. It also makes it hard to give the MyObject different behaviors - let&#x2019;s say for testing and in production.</p>
<p>You can of course use the factory pattern. But there, too, you find a strong coupling between the factory and the produced instances.</p>
<p>Dependency injection is in fact a factory pattern on steroids. There are different implementations of the dependency injection pattern available, but Ninja uses Google&#x2019;s Guice for dependency injection. </p>
<p>The nice thing about Guice is the fact that there is one central point where you can declare which interface should be implemented by what class. Whether it is a Singleton or what Factory (aka Provider) should create that class.</p></div>
<div class="section">
<h2>Guice in Ninja<a name="Guice_in_Ninja"></a></h2>
<p>By convention Ninja will look for a Java file at <tt>conf/Module.java</tt>. That module is a regular Guice module that will be automatically loaded when your application starts up. This file is 100% pure Guice and you can use all Guice goodies. If needed, the constructor of this module can take a <tt>NinjaProperties</tt> object as argument, but it&#x2019;s not mandatory.</p></div>
<div class="section">
<h2>An example<a name="An_example"></a></h2>
<p>A typical usecase it to have an interface that specifies certain methods and glue these interface to implementations via Guice. Let&#x2019;s say we have an interface that returns a message:</p>

<div>
<pre class="prettyprint">
public interface GreetingService {
	String hello();
}
</pre></div>
<p>and the following implementation:</p>

<div>
<pre class="prettyprint">
public class GreetingServiceImpl implements GreetingService {
    
    @Override
	public String hello() {
		return &quot;hi!!!!&quot;;
	}

}
</pre></div>
<p>We can glue together interface and implementation via our <tt>conf/Module.java</tt>:</p>

<div>
<pre class="prettyprint">
public class Module extends AbstractModule {

    @Override
    protected void configure() {       

        bind(GreetingService.class).to(GreetingServiceImpl.class);

    }

}
</pre></div>
<p>And if you want to use that GreetingService inside your application you can simply use the <tt>@Inject</tt> annotation:</p>

<div>
<pre class="prettyprint">
public class ApplicationController {

    @Inject
    GreetingService greeter;

    public Result injection(Context context) {

        return Results.html().render(&quot;greeting&quot;, greeter.hello());

    }
}
</pre></div>
<p>That&#x2019;s all. No more <tt>new</tt> statements in your code! That way you only deal with interfaces in your code and you get the ability to change the real implementation. You can easily replace real service implementations with mocked service implementations when developing your application. And it also gives you the ability to run clean mocked tests using Mockito.</p></div>
<div class="section">
<h2>Advanced configuration<a name="Advanced_configuration"></a></h2>
<p>Ninja includes many default bindings in guice before your application module <tt>conf.Module</tt> is called. These include bindings for base Ninja features like logging, lifecycle support, scheduler support, etc. There are also bindings for &#x201c;classic&#x201d; Ninja features such as freemarker templates, jackson json/xml support, cache, postoffice, and JPA.</p>
<p>You can exclude Ninja&#x2019;s &#x201c;classic&#x201d; bindings by extending your <tt>conf.Module</tt> from <tt>ninja.conf.FrameworkModule</tt> rather than <tt>com.google.inject.AbstractModule</tt>. This instructs Ninja to not load <tt>ninja.conf.NinjaClassicModule</tt> by default. You may find customizing <tt>ninja.conf.NinjaClassicModule</tt> useful in building the exact set of features you&#x2019;d like, especially since it has a builder-syntax for enabling/disabling of feature sets.</p>

<div>
<pre class="prettyprint">
package conf;

import ninja.conf.FrameworkModule;
import ninja.conf.NinjaClassicModule;
import ninja.utils.NinjaProperties;

public class Module extends FrameworkModule {

    private final NinjaProperties ninjaProperties;

    public Module(NinjaProperties ninjaProperties) {
        this.ninjaProperties = ninjaProperties;
    }
    
    @Override
    protected void configure() {
        // classic ninja stack but with no freemarker or xml
        install(new NinjaClassicModule(ninjaProperties)
            .freemarker(false)
            .xml(false)
        );
    }

}
</pre></div></div>
<div class="section">
<h2>Conclusion<a name="Conclusion"></a></h2>
<p>Dependency injection is the key component to develop and maintain a clean and large codebase in Java. Dependency injection is at the core of Ninja and implemented via Google Guice. </p>
<p>The entry point for your application is the module <tt>conf/Module.java</tt>.</p>
<p>Guice can do a lot more for you. Read more about the abilities here: <a class="externalLink" href="https://github.com/google/guice">https://github.com/google/guice</a> .</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2019
                        <a href="http://www.ninjaframework.org">ninjaframework</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
